<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Oloren AI</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="Site description will be here" />
    <!-- <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" /> -->
    <link rel="stylesheet" type="text/css" href="css/magnific-popup.css" />
    <link
      href="https://kit-pro.fontawesome.com/releases/v5.15.2/css/pro.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/default-edit.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="css/responsive.css" />
    <link rel="icon" href="favicon.svg" />
    <!-- <script src="https://d3js.org/d3.v7.min.js"></script> -->
    <script src="https://d3js.org/d3.v4.js"></script>    
    <!--End ALL STYLESHEET -->
  </head>

  <body class="blog-bg">
    <!-- preloader -->
    <div id="preloader"></div>
    <!-- preloader-end -->
    <!-- main-wrap -->
    <!-- <div class="main-wrap"> -->
      <!-- offcanvas-start -->
      <!-- <div class="offcanvas-menu">
        <ul class="offmenu" id="menuParent">
          <a href="#" class="offcanvas-close"><i class="fa fa-times"></i></a>
          <li><a href="#technology-section">Technology</a></li>
          <li><a href="#features-section">Features</a></li>
          <li><a href="#demo-section">Demo</a></li>
          <li><a href="#waitlist-section">Waitlist</a></li>
        </ul>
      </div>
      <div class="offcanvas-overlay"></div> -->
      <!-- offcanvas-start-end -->

      <!-- header-section -->
      <!-- <header class="header-section">
        <div class="container">
          <a href="index.html" class="logo">
            <img src="images/logo.svg" alt="" />
          </a>
          <div class="main-menu d-lg-block d-none">
            <ul>
              <li><a href="#technology-section">Technology</a></li>
              <li><a href="#features-section">Features</a></li>
              <li><a href="blog.html">Blog</a></li>
            </ul>
          </div>
          <a
            href="#"
            class="offcanvas-open d-lg-none d-block ms-auto color-white"
          >
            <i class="far fa-bars"></i>
          </a>
        </div>
      </header> -->
      <!-- End header-section --> 
      <div id="container" class="svg-container">
<script>
  var view,
      margin = 20,
      diameter = 300;

  var color = d3.scaleOrdinal(d3.schemeCategory10);

  var pack = d3.pack()
    .size([300, 300]);
    // .padding(10);

  var canvas = d3.select("div#container").append("svg")
      .attr("preserveAspectRatio", "xMinYMin meet")
      .attr("viewBox", "0 0 300 300")
      .classed("svg-content", true)
      .attr("class", "pack")
      .on("click", function(d) { 
          zoom(nodes); 
      });

  d3.json("blogs.json", function (data) {
      var nodes = d3.hierarchy(data);
      function dragstarted(d) {
        // console.log("dragging!");
          if (!d3.event.active) simulation.alphaTarget(.03).restart();
            d.fx = d.x;
            d.fy = d.y;
          }
          function dragged(d) {
            d.fx = d3.event.x;
            d.fy = d3.event.y;
          }
          function dragended(d) {
            if (!d3.event.active) simulation.alphaTarget(.03);
            d.fx = null;
            d.fy = null;
          }

    var node = canvas.append("g")
        .selectAll("circle")
        .data(pack(nodes).descendants())
        .enter()
        .append("circle")
          .attr("class", "node")
          .attr("r", function (d) { return d.r; })
          .attr("cx", 300 / 2)
          .attr("cy", 300 / 2)
          .attr("fill", function(d, i) {
            if(d.children == null) {
              return "white";
            } else {
              return color(i); }
            }
            )
          .attr("opacity", 1)
          .attr("xlink:href", function(d) {
            console.log(d.url);
            if (d.children == null) {
              return d.url;
            }
          })
          .on("mouseover", function(d, i) {
                d3.select(this)
                    .transition()
                    .duration('50')
                    .attr('opacity', '0.5')
                    .attr('stroke', 'black')
                    .select("name").style({opacity: '1'});
              })
          .on('mouseout', function (d, i) {
            d3.select(this).transition()
                .duration('50')
                .attr('opacity', '1')
                .attr('stroke', null)
          })
          .on("click", function(d) { 
              if (focus !== d) zoom(d), d3.event.stopPropagation(); 
          });
          // .call(d3.drag() // call specific function when circle is dragged
          //     .on("start", dragstarted)
          //     .on("drag", dragged)
          //     .on("end", dragended));
      
    const label = canvas.append("g")
      .style("font", "10px Cabin")
      .attr("text-anchor", "middle")
      .selectAll("text")
        .data(pack(nodes).descendants())
        .enter()
        .append("text")
            .text(function (d) { return d.data.name; })
            .style("fill-opacity", d => d.parent === nodes ? 1 : 0)
            .style("display", d => d.parent === nodes ? "inline" : "none");
    
    
      
      // var simulation = d3.forceSimulation()
      //     .force("center", d3.forceCenter().x(300 / 2).y(300 / 2)) // Attraction to the center of the svg area
      //     .force("charge", d3.forceManyBody().strength(.1)) // Nodes are attracted one each other of value is > 0
      //     .force("collide", d3.forceCollide().strength(.2).radius(function(d){ return (d.r+3) }).iterations(1)) // Force that avoids circle overlapping
      
      // simulation
      //     .nodes(pack(nodes))
      //     .on('tick', function(d) {
      //       node
      //         .attr("cx", function(d) {return d.x; })
      //         .attr("cy", function(d) { return d.y; })
      //     });
    
    var focus = nodes;
    zoomTo([nodes.x, nodes.y, nodes.r*2]);

    function zoom(d) {
      var focus0 = focus; focus = d;
      var transition = d3.transition()
          .duration(d3.event.altKey ? 7500 : 750)
          .tween("zoom", function(d) {
            var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2 + 20]);
            return function(t) { zoomTo(i(t)); };
          });

      label
      .filter(function(d) { return d.parent === focus || this.style.display === "inline"; })
      .transition(transition)
        .style("fill-opacity", d => d.parent === focus ? 1 : 0)
        .on("start", function(d) { if (d.parent === focus) this.style.display = "inline"; })
        .on("end", function(d) { if (d.parent !== focus) this.style.display = "none"; });
    }

    function zoomTo(v) {
      var k = 300 / v[2];
      view = v;
      
      label.attr("transform", function(d) { 
        // console.log(d, v, k);
        return "translate(" + (d.x - v[0] + 150) * k + "," + (d.y - v[1] + 150) * k + ")"; });
      node.attr("transform", function(d) { return "translate(" + (d.x - v[0]) * k + "," + (d.y - v[1]) * k + ")"; });
      node.attr("r", function(d) { return d.r * k; });
    }
  });

  

  // function ready (error, datapoints) {
  //   var nodes = 
  // }

</script>  
</div>
      <!-- <div class="circle"> Oloren BLOGS
        <div class="blog-circle">Visualizing the Chemical Space</div>
      </div> -->

    <!-- js -->
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.js"></script>
    <script src="js/selectivizr-1.0.2.min.js"></script>
    <script src="js/waypoint.js"></script>
    <!-- <script src="js/bootstrap.bundle.min.js"></script> -->
    <script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/main.js"></script>
    <!-- End All Js -->
  </body>
</html>